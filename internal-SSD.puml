@startuml internal-ssd
label l [

{{
title Input

actor user
participant InputHandler
participant Validator

loop Inserimento fino a input valido
    user -> InputHandler: inputSentence
    InputHandler -> Validator: verifyInput(input)
    Validator --> InputHandler: boolean

    alt input non valido
        InputHandler -> user: showInputError()
    end
end

InputHandler --> user: mostra frase
}}

/' da rivedere '/
{{
title Analysis

actor user
participant AnalysisController
participant SentenceValidator
participant TreeDisplayer
participant GoogleAPI

loop Processo di analisi
    user -> AnalysisController: InputProcess
    AnalysisController -> GoogleAPI: analyzeSyntax(input)
    GoogleAPI --> AnalysisController: syntacticTree
    AnalysisController -> SentenceValidator: validateSentence(syntacticTree)
    SentenceValidator --> AnalysisController: boolean

    alt Frase non valida
        AnalysisController -> user: showValidationError
    end
end

opt Mostra struttura sintattica
    user -> AnalysisController: showSyntacticTree
    AnalysisController -> TreeDisplayer: getTree(syntacticTree)
    TreeDisplayer --> user: syntacticStructure
end
}}


/' da rivedere '/
{{
title TemplateGeneration

actor user
participant WordPicker
participant TemplateController
participant TemplateGenerator
participant Template
/'participant TemplateStorage'/

TemplateController -> TemplateGenerator: generateTemplate()
TemplateGenerator -> Template : create()
TemplateGenerator --> TemplateController: template
TemplateController -> WordPicker : handleTemplate()
/'TemplateController -> TemplateStorage: handleTemplate(template)'/

}}


{{
title WordsExtraction

actor user
participant WordPicker
participant Dictionary
participant Sentence

WordPicker -> Dictionary : pickWords(nounce, verbs, adjectives)
WordPicker -> Sentence : pickWords(nounce, verbs, adjectives)
WordPicker -> WordPicker : handleWords(nounce, verbs, adjectives)
}}

{{
title SentenceGeneration

actor user
participant SentenceBuilder
participant WordPicker
participant TemplateController

SentenceBuilder -> TemplateController : getTemplate()
TemplateController --> SentenceBuilder : template
SentenceBuilder -> WordPicker : getWords()
SentenceBuilder -> SentenceBuilder : fillTemplate()
}}


{{
title ToxicityEvaluation

actor user
participant InputHandler
participant SentenceBuilder
participant GoogleAPI
loop
    SentenceBuilder -> GoogleAPI : moderateText()
    GoogleAPI --> SentenceBuilder : result 
end

SentenceBuilder -> InputHandler : displayEvaluation()
InputHandler --> user: toxicity evaluation

}}


{{
title DisplaySentence

actor user
participant InputHandler
participant SentenceBuilder

SentenceBuilder -> InputHandler : showGeneratedSentence(sentence)
InputHandler --> user: sentence

}}
]
@enduml